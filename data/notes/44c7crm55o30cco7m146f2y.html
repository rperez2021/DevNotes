<h1 id="aync-await"><a aria-hidden="true" class="anchor-heading" href="#aync-await"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Aync Await</h1>
<h2 id="general-info"><a aria-hidden="true" class="anchor-heading" href="#general-info"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>General Info</h2>
<p>An important thing to understand is async functions are just syntactical sugar for promises.</p>
<p>Asynchronous code can become difficult to follow when it has a lot of things going on. async and await are two keywords that can help make asynchronous read more like synchronous code. This can help code look cleaner while keeping the benefits of asynchronous code.</p>
<p>For example, the two code blocks below do the exact same thing. They both get information from a server, process it, and return a promise.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getPersonsInfo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> server<span class="token punctuation">.</span><span class="token method function property-access">getPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token parameter">people</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> people<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> person<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">===</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPersonsInfo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token keyword control-flow">await</span> server<span class="token punctuation">.</span><span class="token method function property-access">getPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> person <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> person<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">===</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword control-flow">return</span> person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="the-async-keyword"><a aria-hidden="true" class="anchor-heading" href="#the-async-keyword"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>The Async Keyword</h3>
<p>The <code>async</code> keyword can also be used with any of the ways a function can be created. Said differently: it is valid to use an <code>async</code> function anywhere you can use a normal function. Below you will see some examples that may not be intuitive. If you don’t understand them, come back and take a look when you are done with the assignments.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">yourAsyncFunction</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// do something asynchronously and return a promise</span>
    <span class="token keyword control-flow">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

 anArray<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">item</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
   <span class="token comment">// do something asynchronously for each item in 'anArray'</span>
   <span class="token comment">// one could also use .map here to return an array of promises to use with 'Promise.all()'</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
server<span class="token punctuation">.</span><span class="token method function property-access">getPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">people</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  people<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// do something asynchronously for each person</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="the-await-keyword"><a aria-hidden="true" class="anchor-heading" href="#the-await-keyword"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>The Await Keyword</h3>
<p><code>await</code> is pretty simple: it tells JavaScript to wait for an asynchronous action to finish before continuing the function. It’s like a ‘pause until done’ keyword. The <code>await</code> keyword is used to get a value from a function where you would normally use <code>.then()</code>. Instead of calling <code>.then()</code> after the asynchronous function, you would simply assign a variable to the result using await. Then you can use the result in your code as you would in your synchronous code.</p>
<p><strong>Await accepts thenables</strong>: Like <code>promise.then</code>, <code>await</code> allows us to use thenable objects (those with a callable then method). The idea is that a third-party object may not be a promise, but promise-compatible: if it supports <code>.then</code>, that’s enough to use it with await.</p>
<p>In modern browsers, await on top level works just fine, when we’re inside a module.</p>
<p>If we’re not using modules, or older browsers must be supported, there’s a universal recipe: wrapping into an anonymous async function.</p>
<h3 id="error-handling"><a aria-hidden="true" class="anchor-heading" href="#error-handling"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Error Handling</h3>
<p>Handling errors in async functions is very easy. Promises have the <code>.catch()</code> method for handling rejected promises, and since async functions just return a promise, you can simply call the function, and append a <code>.catch()</code> method to the end.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">asyncFunctionCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword control-flow">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>But there is another way: the mighty try/catch block! If you want to handle the error directly inside the async function, you can use try/catch just like you would inside synchronous code.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getPersonsInfo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token keyword control-flow">await</span> server<span class="token punctuation">.</span><span class="token method function property-access">getPeople</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> person <span class="token operator">=</span> people<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token parameter">person</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span> <span class="token keyword control-flow">return</span> person<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">===</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword control-flow">return</span> person<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Handle the error any way you'd like</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Doing this can look messy, but it is a very easy way to handle errors without appending <code>.catch()</code> after your function calls. How you handle the errors is up to you, and which method you use should be determined by how your code was written. You will get a feel for what needs to be done over time. The assignments will also help you understand how to handle your errors.</p>