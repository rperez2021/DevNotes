<h1 id="es2017"><a aria-hidden="true" class="anchor-heading" href="#es2017"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>ES2017</h1>
<h2 id="list-of-changes"><a aria-hidden="true" class="anchor-heading" href="#list-of-changes"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>List of Changes</h2>
<ul>
<li>Async functions</li>
<li>String padding</li>
<li><code>Object.values()</code></li>
<li><code>Object.entries()</code></li>
<li><code>Object.getOwnPropertyDescriptors()</code></li>
<li>Trailing commas in function parameter lists and calls</li>
<li>Shared memory and atomics</li>
</ul>
<h3 id="async-functions"><a aria-hidden="true" class="anchor-heading" href="#async-functions"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Async Functions</h3>
<p>ES2017 introduced the concept of async functions, and it’s the most important change introduced in this ECMAScript edition.</p>
<p>Async functions are a combination of promises and generators to reduce the boilerplate around promises, and the “don’t break the chain” limitation of chaining promises.</p>
<h4 id="why-they-are-useful"><a aria-hidden="true" class="anchor-heading" href="#why-they-are-useful"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Why they are useful</h4>
<p>It’s a higher level abstraction over promises.</p>
<p>When Promises were introduced in ES6, they were meant to solve a problem with asynchronous code, and they did, but over the 2 years that separated ES6 and ES2017, it was clear that promises could not be the final solution. Promises were introduced to solve the famous callback hell problem, but they introduced complexity on their own, and syntax complexity. They were good primitives around which a better syntax could be exposed to the developers: enter async functions.</p>
<h4 id="quick-example"><a aria-hidden="true" class="anchor-heading" href="#quick-example"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Quick Example</h4>
<p>A quick example
Code making use of asynchronous functions can be written as</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">doSomethingAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'I did something'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword control-flow">await</span> <span class="token function">doSomethingAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Before'</span><span class="token punctuation">)</span>
<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'After'</span><span class="token punctuation">)</span>
</code></pre>
<p>The above code will print the following to the browser console:</p>
<pre class="language-console"><code class="language-console">Before
After
I did something //after 3s
</code></pre>
<h3 id="string-padding"><a aria-hidden="true" class="anchor-heading" href="#string-padding"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>String Padding</h3>
<p>The purpose of string padding is to add characters to a string, so it reaches a specific length.</p>
<p><code>padStart(targetLength [, padString])</code></p>
<p><code>padEnd(targetLength [, padString])</code></p>
<p>Sample usage:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	
‘test’<span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>	<span class="token comment">// ‘test’</span>
‘test’<span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>	<span class="token comment">// ‘ test’</span>
‘test’<span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>	<span class="token comment">// ‘    test’</span>
‘test’<span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> ‘abcd’<span class="token punctuation">)</span>	<span class="token comment">// ‘abcdtest’</span>

<span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>	
‘test’<span class="token punctuation">.</span><span class="token method function property-access">padEnd</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>  <span class="token comment">//	‘test’</span>
‘test’<span class="token punctuation">.</span><span class="token method function property-access">padEnd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>	<span class="token comment">// ‘test ‘</span>
‘test’<span class="token punctuation">.</span><span class="token method function property-access">padEnd</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>	<span class="token comment">// ‘test    ‘</span>
‘test’<span class="token punctuation">.</span><span class="token method function property-access">padEnd</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span>  <span class="token comment">// ‘abcd’)	‘testabcd’</span>
</code></pre>
<h3 id="objectvalues"><a aria-hidden="true" class="anchor-heading" href="#objectvalues"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Object.values()</h3>
<p>This method returns an array containing all the object own property values.</p>
<p>Usage:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Fred'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">87</span> <span class="token punctuation">}</span>
<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">values</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// ['Fred', 87]</span>
<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token comment">// also works with arrays!:</span>

<span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Fred'</span><span class="token punctuation">,</span> <span class="token string">'Tony'</span><span class="token punctuation">]</span>
<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">values</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span> <span class="token comment">// ['Fred', 'Tony']</span>
</code></pre>
<h3 id="objectentries"><a aria-hidden="true" class="anchor-heading" href="#objectentries"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Object.entries()</h3>
<p>This method returns an array containing all the object own properties, as an array of [key, value] pairs.</p>
<p>Usage:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Fred'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">87</span> <span class="token punctuation">}</span>
<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span> <span class="token comment">// [['name', 'Fred'], ['age', 87]]</span>
<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token comment">//also works with arrays:</span>

<span class="token keyword">const</span> people <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Fred'</span><span class="token punctuation">,</span> <span class="token string">'Tony'</span><span class="token punctuation">]</span>
<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span>people<span class="token punctuation">)</span> <span class="token comment">// [['0', 'Fred'], ['1', 'Tony']]</span>
</code></pre>
<h3 id="getownpropertydescriptors"><a aria-hidden="true" class="anchor-heading" href="#getownpropertydescriptors"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>getOwnPropertyDescriptors()</h3>
<p>This method returns all own (non-inherited) properties descriptors of an object.</p>
<p>Any object in JavaScript has a set of properties, and each of these properties has a descriptor.</p>
<p>A descriptor is a set of attributes of a property, and it’s composed by a subset of the following:</p>
<ul>
<li>value: the value of the property</li>
<li>writable: true the property can be changed</li>
<li>get: a getter function for the property, called when the property is read</li>
<li>set: a setter function for the property, called when the property is set to a value</li>
<li>configurable: if false, the property cannot be removed nor any attribute can be changed, except its value</li>
<li>enumerable: true if the property is enumerable</li>
</ul>
<p><code>Object.getOwnPropertyDescriptors(obj)</code> accepts an object, and returns an object with the set of descriptors.</p>
<h4 id="in-what-way-is-this-useful"><a aria-hidden="true" class="anchor-heading" href="#in-what-way-is-this-useful"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>In what way is this useful?</h4>
<p>ES6 gave us <code>Object.assign()</code>, which copies all enumerable own properties from one or more objects, and return a new object.</p>
<p>However there is a problem with that, because it does not correctly copies properties with non-default attributes.</p>
<p>If an object for example has just a setter, it’s not correctly copied to a new object, using <code>Object.assign()</code>.</p>
<p>For example with</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> person1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">set</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>newName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This won’t work:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> person2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">assign</span><span class="token punctuation">(</span>person2<span class="token punctuation">,</span> person1<span class="token punctuation">)</span>
</code></pre>
<p>But this will work:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> person3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">defineProperties</span><span class="token punctuation">(</span>person3<span class="token punctuation">,</span>
  <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>As you can see with a simple console test:</p>
<pre class="language-javascript"><code class="language-javascript">person1<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> <span class="token string">'x'</span>
<span class="token string">"x"</span>

person2<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> <span class="token string">'x'</span>

person3<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">=</span> <span class="token string">'x'</span>
<span class="token string">"x"</span>
</code></pre>
<p>person2 misses the setter, it was not copied over.</p>
<p>The same limitation goes for shallow cloning objects with <code>Object.create()</code>.</p>
<h3 id="trailing-commas"><a aria-hidden="true" class="anchor-heading" href="#trailing-commas"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Trailing Commas</h3>
<p>This feature allows to have trailing commas in function declarations, and in functions calls:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">doSomething</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">var1<span class="token punctuation">,</span> var2<span class="token punctuation">,</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token string">'test2'</span><span class="token punctuation">,</span> <span class="token string">'test2'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
</code></pre>
<p>This change will encourage developers to stop the ugly “comma at the start of the line” habit.</p>
<h3 id="shared-memory-and-atomics"><a aria-hidden="true" class="anchor-heading" href="#shared-memory-and-atomics"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Shared Memory and Atomics</h3>
<p>WebWorkers are used to create multithreaded programs in the browser.</p>
<p>They offer a messaging protocol via events. Since ES2017, you can create a shared memory array between web workers and their creator, using a <code>SharedArrayBuffer</code>.</p>
<p>Since it’s unknown how much time writing to a shared memory portion takes to propagate, <strong>Atomics</strong> are a way to enforce that when reading a value, any kind of writing operation is completed.</p>
<h2 id="source"><a aria-hidden="true" class="anchor-heading" href="#source"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Source</h2>
<p>Most of these notes are copied from <a href="https://flaviocopes.com/es2017/">this site</a></p>